 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>محول العملات الفوري</title>

<style>
    body {
        font-family: sans-serif;
        background: #f5f5f5;
        text-align: center;
        padding: 20px;
    }
    .box {
        background: white;
        padding: 20px;
        max-width: 450px;
        margin: auto;
        border-radius: 15px;
        box-shadow: 0 0 15px #0002;
    }
    input, select, button {
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        font-size: 16px;
        border-radius: 10px;
        border: 1px solid #ccc;
    }
    button {
        background: #0a84ff;
        color: white;
    }
</style>
</head>
<body>

<h2>محول العملات الفوري — يعمل 100%</h2>

<div class="box">
    <label>المبلغ</label>
    <input type="number" id="amount" value="1">

    <label>من</label>
    <select id="from"></select>

    <label>إلى</label>
    <select id="to"></select>

    <button onclick="doConvert()">تحويل الآن</button>

    <h3 id="result">النتيجة: -</h3>
    <h4 id="rate">سعر الصرف: -</h4>
    <small id="update">آخر تحديث: -</small>
</div>

<script>
const amountEl = document.getElementById("amount");
const fromEl   = document.getElementById("from");
const toEl     = document.getElementById("to");
const resultEl = document.getElementById("result");
const rateEl   = document.getElementById("rate");
const updateEl = document.getElementById("update");


// تحميل العملات من API يعمل فعلاً
async function loadSymbols() {
    const res = await fetch("https://open.er-api.com/v6/latest/USD");
    const data = await res.json();

    const currencies = Object.keys(data.rates);

    currencies.forEach(c => {
        fromEl.innerHTML += `<option value="${c}">${c}</option>`;
        toEl.innerHTML   += `<option value="${c}">${c}</option>`;
    });

    fromEl.value = "USD";
    toEl.value = "SAR";
}


// التحويل
async function doConvert() {
    const amount = Number(amountEl.value);
    const from = fromEl.value;
    const to = toEl.value;

    if (!amount || amount <= 0) {
        resultEl.textContent = "أدخل مبلغًا صحيحًا";
        return;
    }

    const res = await fetch(`https://open.er-api.com/v6/latest/${from}`);
    const data = await res.json();

    const rate = data.rates[to];
    const converted = amount * rate;

    resultEl.textContent = `النتيجة: ${converted.toFixed(2)} ${to}`;
    rateEl.textContent   = `سعر الصرف: 1 ${from} = ${rate} ${to}`;
    updateEl.textContent = data.time_last_update_utc;
}


// تشغيل عند تحميل الصفحة
(async () => {
    await loadSymbols();
    doConvert();
})();
</script>

</body>
</html>
